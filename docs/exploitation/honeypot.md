---
sidebar_position: 4
---

# 4. Gestion et maintenance du serveur honeypot

## 4.1 Connexion SSH

Pour gérer et administrer le T-Pot à distance, il est possible de s'y connecter via SSH. Cela permet d'accéder à la ligne de commande du serveur T-Pot, ainsi qu'à l'interface web pour visualiser, configurer, maintenir et suivre les activités du honeypot.

Pour se connecter via `SSH`, il est possible d'utiliser la commande suivante :
```bash
ssh -l <nom-utilisateur> -p 64295 <adresse-ip-tpot>
```
**Attention** :
- Le port du `SSH` change au court de l'installation pour devenir `64295`
- Il faut remplacer le nom d'utilisateur et l'adresse IP par les valeurs réelles

## 4.2 Accès a l'interface Web

Une fois connecté, il est possible d'aller sur l'interface Web en tapant l'adresse : `https://<ip-du-tpot>:64297` et en entrant les identifiants choisis lors de l'installation.

Il y est possible d'explorer les différentes fonctionnalités offertes par T-Pot, notamment :
- **Kibana** : analyse et visualisation des données capturées via divers tableaux de bord.
- **Carte des Attaques** : visualisation en temps réel des attaques.
- **Cyberchef** : outil pour le chiffrement, l'encodage, la compression et l'analyse des données.
- **Elasticvue** : interface web pour interagir avec le cluster Elasticsearch.
- **Spiderfoot** : outil d'automatisation de la collecte de renseignements open-source.

## 4.3. Mise à jour du serveur T-Pot

Il est essentiel de maintenir le serveur T-Pot à jour pour bénéficier des dernières améliorations et correctifs de sécurité. 

Les commandes suivantes permettent de mettre le serveur à jour :
```bash
sudo apt update
sudo apt upgrade
```

Pour mettre à jour tpot lui-même, il est possible d'exécuter le script suivant :
```bash 
~/tpotce/update.sh
```

## 4.5. Redémarrage journalier

Par défaut T-pot ajoutera un redémarrage quotidien incluant un nettoyage.
Il est possible d'altérer le moment de ce redémarrage avec la commande `sudo crontab -e`.

```bash 
#Ansible: T-Pot Daily Reboot
42 2 * * * bash -c 'systemctl stop tpot.service && docker container prune -f; docker image prune -f; docker volume prune -f; /usr/sbin/shutdown -r +1 "T-Pot Daily Reboot"'
```

## Démarrage
Le service démarre et s'arrête automatiquement à chaque redémarrage.
Si besoin de le démarrer manuellement, il est possible d'utiliser la commande `systemctl start tpot` et observer le démarrage des conteneurs via `dpsw`.

## Arrêt
Identique au démarrage. Pour l'arrêter manuellement, il est possible d'utiliser la commande `systemctl stop tpot`.

## Dossier `data`
Tous les fichiers journaux persistants des honeypots, des outils et des services liés à T-Pot sont stockés dans `~/tpotce/data`.